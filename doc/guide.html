<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CxxTest User Guide</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.76.1" /></head><body><div xml:lang="en" class="article" title="CxxTest User Guide" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="id36136982"></a>CxxTest User Guide</h2></div></div><hr /></div><div class="toc"><p><strong>Table of Contents</strong></p><dl><dt><span class="section"><a href="#_overview">1. Overview</a></span></dt><dt><span class="section"><a href="#gettingStarted">2. Getting Started</a></span></dt><dd><dl><dt><span class="section"><a href="#_a_first_example">2.1. A First Example</a></span></dt><dt><span class="section"><a href="#_a_second_example">2.2. A Second Example</a></span></dt></dl></dd><dt><span class="section"><a href="#testAssertions">3. Test Assertions</a></span></dt><dt><span class="section"><a href="#cxxtestgen">4. The CxxTestGen Command</a></span></dt><dd><dl><dt><span class="section"><a href="#_general_options">4.1. General Options</a></span></dt><dt><span class="section"><a href="#_test_listener_options">4.2. Test Listener Options</a></span></dt><dt><span class="section"><a href="#_language_options">4.3. Language Options</a></span></dt><dt><span class="section"><a href="#_test_runner_options">4.4. Test Runner Options</a></span></dt><dt><span class="section"><a href="#_template_files">4.5. Template Files</a></span></dt><dt><span class="section"><a href="#_c_parser">4.6. C++ Parser</a></span></dt></dl></dd><dt><span class="section"><a href="#samples">5. Sample Problems</a></span></dt><dt><span class="section"><a href="#installation">6. Installation</a></span></dt><dt><span class="section"><a href="#discussion">7. Status and Future Plans</a></span></dt><dt><span class="appendix"><a href="#appendix_A">A. Test Assertion Examples</a></span></dt></dl></div><div class="abstract" title="Abstract"><a id="_abstract"></a><div class="titlepage"></div><p>CxxTest is a unit testing framework for C++ that is similar in
spirit to <a class="ulink" href="http://junit.org/" target="_top">JUnit</a>,
<a class="ulink" href="http://cppunit.sourceforge.net" target="_top">CppUnit</a>, and
<a class="ulink" href="http://xprogramming.com/software.html" target="_top">xUnit</a>.  CxxTest is easy to
use because it does not require precompiling a CxxTest testing
library, it employs no advanced features of C++ (e.g. RTTI) and it
supports a very flexible form of test discovery.  This documentation
describes CxxTest 4.0, which includes significant enhancements to
the test discovery process, a modern test driver, and new documentation.</p></div><div class="section" title="1. Overview"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_overview"></a>1. Overview</h2></div></div></div><p>CxxTest is a unit testing framework for C++ that is similar in
spirit to <a class="ulink" href="http://junit.org/" target="_top">JUnit</a>,
<a class="ulink" href="http://cppunit.sourceforge.net" target="_top">CppUnit</a>, and
<a class="ulink" href="http://xprogramming.com/software.html" target="_top">xUnit</a>.
CxxTest is designed to be as portable as possible;  it does not require</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
RTTI
</li><li class="listitem">
Member template functions
</li><li class="listitem">
Exception handling
</li><li class="listitem">
External libraries (including memory management, file/console I/O, graphics libraries)
</li></ul></div><p>In particular, the design of CxxTest was tailored for C++ compilers
on embedded systems, for which many of these features are not
supported.  However, CxxTest can also leverage standard C++ features
when they are supported by a compiler (e.g. catch unhandled
exceptions).</p><p>Additionally, CxxTest supports <span class="emphasis"><em>test discovery</em></span>.  Tests are defined
in C++ header files, which are parsed by CxxTest to automatically
generate a test runner.  Thus, CxxTest is somewhat easier to use
than alternative C++ testing frameworks, since you do not need to
<span class="emphasis"><em>register</em></span> tests.</p><p>CxxTest is available under the <a class="ulink" href="http://www.gnu.org/copyleft/lesser.html" target="_top">GNU
Lesser General Public</a> license.
The following are key online resources for CxxTest:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="http://cxxtest.tigris.org" target="_top">CxxTest home page</a>
</li><li class="listitem">
<a class="ulink" href="http://cxxtest.tigris.org/servlets/ProjectDocumentListR" target="_top">Release downloads</a>
</li><li class="listitem">
<a class="ulink" href="http://cxxtest.tigris.org/guide.html" target="_top">HTML user guide</a>
</li><li class="listitem">
<a class="ulink" href="http://cxxtest.tigris.org/guide.pdf" target="_top">PDF user guide</a>
</li></ul></div><p>The CxxTest User Guide provides the following documentation:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="link" href="#gettingStarted" title="2. Getting Started">Getting Started</a>: Some simple examples that illustrate how to use CxxTest
</li><li class="listitem">
<a class="link" href="#testAssertions" title="3. Test Assertions">Test Assertions</a>: The test assertions supported by CxxTest
</li><li class="listitem">
<a class="link" href="#cxxtestgen" title="4. The CxxTestGen Command">The CxxTestGen Command</a>: Documentation for the <code class="literal">cxxtestgen</code> command
</li><li class="listitem">
<a class="link" href="#samples" title="5. Sample Problems">Sample Problems</a>: Examples that illustrate features of CxxTest
</li><li class="listitem">
<a class="link" href="#installation" title="6. Installation">Installation</a>: How to install CxxTest
</li><li class="listitem">
<a class="link" href="#discussion" title="7. Status and Future Plans">Discussion</a>: Comments on the past, present and future of CxxTest
</li></ul></div></div><div class="section" title="2. Getting Started"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gettingStarted"></a>2. Getting Started</h2></div></div></div><p>Testing is performed with CxxTest in a four-step process:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Tests are defined in C++ header files
</li><li class="listitem">
The <code class="literal">cxxtestgen</code> command processes header files to generate files for the test runner.
</li><li class="listitem">
Compile the test runner.
</li><li class="listitem">
Execute the test runner to run all test suites.
</li></ol></div><p>CxxTest supports test automation, sharing of setup
and shutdown code for tests, aggregation of tests into collections,
and independence of the tests from the reporting framework.  To
achieve this, CxxTest supports some important concepts that are common to xUnit frameworks (
e.g. <a class="ulink" href="http://junit.org/" target="_top">JUnit</a>, <a class="ulink" href="http://cppunit.sourceforge.net" target="_top">CppUnit</a>, and
<a class="ulink" href="http://xprogramming.com/software.html" target="_top">xUnit</a>):</p><div class="variablelist"><dl><dt><span class="term">
test fixture
</span></dt><dd>
   A <span class="emphasis"><em>test fixture</em></span> represents the preparation needed to perform one or more
   tests, and any associate cleanup actions.  This may involve, for example,
   creating temporary or proxy databases, directories, or starting a server
   process.
</dd></dl></div><div class="variablelist"><dl><dt><span class="term">
test suite
</span></dt><dd>
   A <span class="emphasis"><em>test suite</em></span> is a collection of test cases, which represent
   the smallest unit of testing.  A test suite is defined by a class
   that inherits from the <code class="literal">CxxTest::TestSuite</code> class, and the tests
   in a test suite are executed together.
</dd><dt><span class="term">
test
</span></dt><dd>
    A test is a public member function of a test suite whose name
    starts with <code class="literal">test</code>, e.g. <code class="literal">testDirectoryScanner()</code>,
    <code class="literal">test_cool_feature()</code> and <code class="literal">TestImportantBugFix()</code>.
</dd><dt><span class="term">
test runner
</span></dt><dd>
   A <span class="emphasis"><em>test runner</em></span> is a component which orchestrates the execution
   of tests across one or more test suites and provides the outcome
   to the user.
</dd></dl></div><p>When building test fixtures using <code class="literal">TestSuite</code>, the <code class="literal">TestSuite.setUp</code>
and <code class="literal">TestSuite.tearDown</code> methods can be overridden to provide
initialization and cleanup for the fixture.  The <code class="literal">TestSuite.setUp</code>
method is run before each test is executed, and the <code class="literal">TestSuite.tearDown</code>
method is run after each test is executed.</p><div class="section" title="2.1. A First Example"><div class="titlepage"><div><div><h3 class="title"><a id="_a_first_example"></a>2.1. A First Example</h3></div></div></div><p>The following is a simple example of a
test suite with a single test, <code class="literal">testAddition</code>, which perform two test assertions:</p><pre class="programlisting">// MyTestSuite1.h
#include &lt;cxxtest/TestSuite.h&gt;

class MyTestSuite1 : public CxxTest::TestSuite
{
public:
   void testAddition( void )
   {
      TS_ASSERT( 1 + 1 &gt; 1 );
      TS_ASSERT_EQUALS( 1 + 1, 2 );
   }
};</pre><p>You use the <code class="literal">cxxtestgen</code> script to generate a <span class="emphasis"><em>test runner</em></span> for test suites in C++ header files:</p><pre class="programlisting">cxxtestgen --error-printer -o runner.cpp MyTestSuite1.h</pre><p>This command generates the file <code class="literal">runner.cpp</code>, which can be compiled.</p><pre class="programlisting">cxxtestgen --error-printer -o runner.cpp MyTestSuite1.h</pre><p>Note that additional compiler flags may be needed to include headers
and libraries that are used during testing.</p><p>This runner can be executed to perform the specified tests:</p><pre class="programlisting">./runner</pre><p>which generates the following output:</p><pre class="screen">Running 1 test.OK!</pre></div><div class="section" title="2.2. A Second Example"><div class="titlepage"><div><div><h3 class="title"><a id="_a_second_example"></a>2.2. A Second Example</h3></div></div></div><p>The following header file extends the previous example to
include a test that generates an error:</p><pre class="programlisting">// MyTestSuite2.h
#include &lt;cxxtest/TestSuite.h&gt;

class MyTestSuite2 : public CxxTest::TestSuite
{
public:
   void testAddition( void )
   {
      TS_ASSERT( 1 + 1 &gt; 1 );
      TS_ASSERT_EQUALS( 1 + 1, 2 );
   }

   void testMultiplication( void )
   {
      TS_ASSERT_EQUALS( 2 * 2, 5 );
   }
};</pre><p>The test runner generated by <code class="literal">cxxtestgen</code> for this test suite generates the following output:</p><pre class="screen">Running 2 tests.
In MyTestSuite::testMultiplication:
MyTestSuite2.h:15: Error: Expected (2 * 2 == 5), found (4 != 5)
Failed 1 of 2 tests
Success rate: 50%</pre></div></div><div class="section" title="3. Test Assertions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="testAssertions"></a>3. Test Assertions</h2></div></div></div><p>The following table summarizes the test assertions supported by CxxTest.
<a class="link" href="#appendix_A" title="A. Test Assertion Examples">Appendix A</a> provides examples that illustrate the use of these test assertions.</p><div class="informaltable"><table cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; "><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"> Macro                                                                 </th><th style="border-bottom: 1px solid #527bbd; " align="left" valign="top"> Description</th></tr></thead><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><a class="link" href="#ts_assert"><code class="literal">TS_ASSERT(<span class="emphasis"><em>expr</em></span>)</code></a></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Verify <code class="literal"><span class="emphasis"><em>expr</em></span></code> is true</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><a class="link" href="#ts_assert_delta"><code class="literal">TS_ASSERT_DELTA(x,y,d)</code></a></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Verify that <code class="literal">abs(x-y) &lt; d</code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><a class="link" href="#ts_assert_differs"><code class="literal">TS_ASSERT_DIFFERS(x,y)</code></a></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Verify that <code class="literal"><span class="emphasis"><em>x != y</em></span></code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><a class="link" href="#ts_assert_equals"><code class="literal">TS_ASSERT_EQUALS(x,y)</code></a></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Verify that <code class="literal"><span class="emphasis"><em>x == y</em></span></code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><a class="link" href="#ts_assert_less_than"><code class="literal">TS_ASSERT_LESS_THAN(x,y)</code></a></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Verify that <code class="literal"><span class="emphasis"><em>x &lt; y</em></span></code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><a class="link" href="#ts_assert_less_than_equals"><code class="literal">TS_ASSERT_LESS_THAN_EQUALS(x,y)</code></a></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Verify that <code class="literal"><span class="emphasis"><em>x ⇐ y</em></span></code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><a class="link" href="#ts_assert_predicate"><code class="literal">TS_ASSERT_PREDICATE(P,x)</code></a></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Verify <code class="literal"><span class="emphasis"><em>P(x)</em></span></code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><a class="link" href="#ts_assert_relation"><code class="literal">TS_ASSERT_RELATION(x,R,y)</code></a></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Verify <code class="literal"><span class="emphasis"><em>x R y</em></span></code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><a class="link" href="#ts_assert_same_data"><code class="literal">TS_ASSERT_SAME_DATA(x,y,size)</code></a></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Verify two buffers are equal</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><a class="link" href="#ts_assert_throws"><code class="literal">TS_ASSERT_THROWS(expr,type)</code></a></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Verify that <code class="literal"><span class="emphasis"><em>expr</em></span></code> throws the specified exception type</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><a class="link" href="#ts_assert_throws_anything"><code class="literal">TS_ASSERT_THROWS_ANYTHING(expr)</code></a></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Verify that <code class="literal"><span class="emphasis"><em>expr</em></span></code> throws an exception</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><a class="link" href="#ts_assert_throws_assert"><code class="literal">TS_ASSERT_THROWS_ASSERT(expr,arg,assertion)</code></a></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Verify type and value of what <code class="literal"><span class="emphasis"><em>expr</em></span></code> throws</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><a class="link" href="#ts_assert_throws_equals"><code class="literal">TS_ASSERT_THROWS_EQUALS(expr,arg,x,y)</code></a></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Verify type and value of what <code class="literal"><span class="emphasis"><em>expr</em></span></code> throws</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><a class="link" href="#ts_assert_throws_nothing"><code class="literal">TS_ASSERT_THROWS_NOTHING(expr)</code></a></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Verify that <code class="literal"><span class="emphasis"><em>expr</em></span></code> doesn’t throw anything</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><a class="link" href="#ts_fail"><code class="literal">TS_FAIL(<span class="emphasis"><em>message</em></span>)</code></a></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Fail unconditionally</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><a class="link" href="#ts_trace"><code class="literal">TS_TRACE(<span class="emphasis"><em>message</em></span>)</code></a></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Print <code class="literal"><span class="emphasis"><em>message</em></span></code> as an informational message</p></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p><a class="link" href="#ts_warn"><code class="literal">TS_WARN(<span class="emphasis"><em>message</em></span>)</code></a></p></td><td style="" align="left" valign="top"><p>Print <code class="literal"><span class="emphasis"><em>message</em></span></code> as a warning</p></td></tr></tbody></table></div><p>The test assertions supported by CxxTest are defined as macros,
which eliminates the need for certain templates within CxxTest and
allows tests to catch exceptions.  There are four categories of
test assertions in CxxTest, which are distinguished by their prefixes:</p><div class="variablelist"><dl><dt><span class="term">
TS_
</span></dt><dd>
These test assertions perform a test. Catch exceptions generated
during testing will cause the test to fail, except for tests that
check for exceptions.
</dd><dt><span class="term">
TSM_
</span></dt><dd>
These test assertions perform the same tests as the corresponding
<code class="literal">TS_</code> assertions, but their first argument is a <code class="literal">const char*</code> message
buffer that is printed when the test fails.
</dd><dt><span class="term">
ETS_
</span></dt><dd>
These test assertions perform the same tests as the corresponding
<code class="literal">TS_</code> assertions.  However, these test assertions do not catch
exceptions generated during testing.
</dd><dt><span class="term">
ETSM_
</span></dt><dd>
These test assertions perform the same tests as the
corresponding <code class="literal">TS_</code> assertions, but (1) their first argument is a
<code class="literal">const char*</code> message buffer is printed when the test fails, and
(2) these assertions do not catch exceptions generated during
testing.
</dd></dl></div></div><div class="section" title="4. The CxxTestGen Command"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="cxxtestgen"></a>4. The CxxTestGen Command</h2></div></div></div><p>The <code class="literal">cxxtestgen</code> command processes one or more C++ header files to
generate a test runner.  The <code class="literal">cxxtestgen</code> command performs test
discovery by parsing the header files to find test classes, which
inherit from the class <code class="literal">CxxTest::TestSuite</code>.</p><p>The <code class="literal">--help</code> option generates the following summary of the <code class="literal">cxxtestgen</code> command line options:</p><pre class="screen">Usage: cxxtestgen [options] &lt;filename&gt; [&lt;filename&gt; ...]

Options:
  -h, --help            show this help message and exit
  --version             Write the CxxTest version.
  -o NAME, --output=NAME
                        Write output to file NAME.
  -w WORLD, --world=WORLD
                        The label of the tests, used to name the XML results.
  --include=HEADER      Include file HEADER in the test runner before other
                        headers.
  --abort-on-fail       Abort tests on failed asserts (like xUnit).
  --runner=CLASS        Create a test runner that processes test events using
                        the class CxxTest::CLASS.
  --gui=CLASS           Create a GUI test runner that processes test events
                        using the class CxxTest::CLASS. (deprecated)
  --error-printer       Create a test runner using the ErrorPrinter class, and
                        allow the use of the standard library.
  --xunit-printer       Create a test runner using the XUnitPrinter class.
  --xunit-file=XUNIT_FILE
                        The file to which the XML summary is written for test
                        runners using the XUnitPrinter class.  The default XML
                        filename is TEST-&lt;world&gt;.xml, where &lt;world&gt; is the
                        value of the --world option.  (default: cxxtest)
  --have-std            Use the standard library (even if not found in tests).
  --no-std              Do not use standard library (even if found in tests).
  --have-eh             Use exception handling (even if not found in tests).
  --no-eh               Do not use exception handling (even if found in
                        tests).
  --longlong=TYPE       Use TYPE as long long.  (default: long long)
  --no-static-init      Do not rely on static initialization in the test
                        runner.
  --template=TEMPLATE   Generate the test runner using file TEMPLATE to define
                        a template.
  --root                Write the main() function and global data for a test
                        runner.
  --part                Write the tester classes for a test runner.
  --factor              Declare the _CXXTEST_FACTOR macro.  (deprecated)</pre><p>The following section describe illustrate the use of these command line options.</p><div class="section" title="4.1. General Options"><div class="titlepage"><div><div><h3 class="title"><a id="_general_options"></a>4.1. General Options</h3></div></div></div><p>The default behavior of <code class="literal">cxxtestgen</code> is to send the source for the
test runner to the standard output stream.  The <code class="literal">--output</code> (<code class="literal">-o</code>)
option indicates a filename for the test runner.</p><p>The <code class="literal">--world</code> (<code class="literal">-w</code>) option specifies the value of the <code class="literal">CxxTest::RealWorldDescription::_worldName</code>
variable.  This option also customizes the filename used for XML output files (see below).</p><p>The <code class="literal">--include</code> option defines a filename that is included in the runner before all other headers.</p><p>The <code class="literal">--abort-on-fail</code> option forces an abort if a test fails, rather than continuing execution
to the next test.</p></div><div class="section" title="4.2. Test Listener Options"><div class="titlepage"><div><div><h3 class="title"><a id="_test_listener_options"></a>4.2. Test Listener Options</h3></div></div></div><p>The test runner behavior is controlled by a <span class="emphasis"><em>test listener</em></span> class
that is used to define to the <code class="literal">main</code> function.  The test listener
class is a subclass of <code class="literal">TestListener</code> that receives notifications
about the testing process, notably which assertions failed.  The
<code class="literal">--runner</code> option is used to specify the test listener that is used
in the test runner.  The following test listeners are defined in
CxxTest:</p><div class="variablelist"><dl><dt><span class="term">
<code class="literal">ErrorPrinter</code>
</span></dt><dd>
    This is the standard error printer, which formats its output to the standard output stream (<code class="literal">std::cout</code>).
</dd><dt><span class="term">
<code class="literal">StdioPrinter</code>
</span></dt><dd>
    The same as <code class="literal">ErrorPrinter</code> except that it uses <code class="literal">printf</code> instead of <code class="literal">std::cout</code>.
</dd><dt><span class="term">
<code class="literal">ParenPrinter</code>
</span></dt><dd>
    Identical to <code class="literal">ErrorPrinter</code> except that it prints line numbers in parantheses. This is the way Visual Studio expects it.
</dd><dt><span class="term">
<code class="literal">XmlPrinter</code>
</span></dt><dd>
    Print test results to an XML file.
</dd><dt><span class="term">
<code class="literal">XUnitPrinter</code>
</span></dt><dd>
    This test listener generates output using both <code class="literal">ErrorPrinter</code> and <code class="literal">XmlPrinter</code>.
</dd></dl></div><div class="section" title="ErrorPrinter"><div class="titlepage"><div><div><h4 class="title"><a id="_errorprinter"></a>ErrorPrinter</h4></div></div></div><p>The <code class="literal">--error-printer</code> option creates a runner using the <code class="literal">ErrorPrinter</code>
test listener, and it indicates that the standard library is used
in the test runner.  The <code class="literal">ErrorPrinter</code> test listener prints dots
to summarize test execution, along with a summary of the test
results.  For example, the command</p><pre class="programlisting">cxxtestgen --error-printer -o runner.cpp MyTestSuite2.h</pre><p>generates the following output:</p><pre class="programlisting">Running 2 tests.
In MyTestSuite::testMultiplication:
MyTestSuite2.h:15: Error: Expected (2 * 2 == 5), found (4 != 5)
Failed 1 of 2 tests
Success rate: 50%</pre></div><div class="section" title="StdioPrinter"><div class="titlepage"><div><div><h4 class="title"><a id="_stdioprinter"></a>StdioPrinter</h4></div></div></div><p>If your compiler does not support <code class="literal">std::cout</code>, then the <code class="literal">ErrorPrinter</code> test listener cannot be used.
In this case, the <code class="literal">StdioPrinter</code> test listener can be used;  it provides the same output as <code class="literal">ErrorPrinter</code> but it uses the <code class="literal">printf</code> function. For example, the command line:</p><pre class="programlisting">cxxtestgen --runner=StdioPrinter -o runner.cpp MyTestSuite2.h</pre><p>generates the following output:</p><pre class="programlisting">Running 2 tests.
In MyTestSuite::testMultiplication:
MyTestSuite2.h:15: Error: Expected (2 * 2 == 5), found (4 != 5)
Failed 1 of 2 tests
Success rate: 50%</pre></div><div class="section" title="ParenPrinter"><div class="titlepage"><div><div><h4 class="title"><a id="_parenprinter"></a>ParenPrinter</h4></div></div></div><p>The <code class="literal">--runner=ParenPrinter</code> option creates a similar test runner:</p><pre class="programlisting">cxxtestgen --runner=ParenPrinter -o runner.cpp MyTestSuite2.h</pre><p>This test runner generates output that is similar to the <code class="literal">ErrorPrinter</code> test listener:</p><pre class="programlisting">Running 2 tests.
In MyTestSuite::testMultiplication:
MyTestSuite2.h(15): Error: Expected (2 * 2 == 5), found (4 != 5)
Failed 1 of 2 tests
Success rate: 50%</pre><p>The only difference is the parentheses used in the output.  This test listener provides a format that can be recognized by Visual Studio.</p></div><div class="section" title="XmlPrinter"><div class="titlepage"><div><div><h4 class="title"><a id="_xmlprinter"></a>XmlPrinter</h4></div></div></div><p>The <code class="literal">--runner=XmlPrinter</code> option creates a test runner whose output is an XML summary of the test results.  For example, the command:</p><pre class="programlisting">cxxtestgen --runner=XmlPrinter -o runner.cpp MyTestSuite2.h</pre><p>generates the following output:</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;testsuite name="cxxtest"  tests="2" errors="0" failures="1" time="0" &gt;
    &lt;testcase classname="MyTestSuite" name="testAddition" line="7" /&gt;
    &lt;testcase classname="MyTestSuite" name="testMultiplication" line="13"&gt;
        &lt;failure file="MyTestSuite2.h" line="15" type="failedAssertEquals" &gt;Error: Expected (2 * 2 == 5), found (4 != 5)&lt;/failure&gt;
    &lt;/testcase&gt;
&lt;/testsuite&gt;</pre><p>This XML format is conforms to the XML standard used by other xUnit tools.  Thus, this output can be used as input in other tools, like <a class="ulink" href="http://jenkins-ci.org/" target="_top">Jenkins</a>, to generate test summaries.</p></div><div class="section" title="XUnitPrinter"><div class="titlepage"><div><div><h4 class="title"><a id="_xunitprinter"></a>XUnitPrinter</h4></div></div></div><p>The <code class="literal">XUnitPrinter</code> test listener generates output using both the
<code class="literal">ErrorPrinter</code> and <code class="literal">XmlPrinter</code> test listeners.  This allows the
user to interactively view a simple test summary, while simultaneously
generating an XML summary of the test results.  The <code class="literal">--xunit-printer</code>
option specifies the use of <code class="literal">XUnitPrinter</code>:</p><pre class="programlisting">cxxtestgen --xunit-printer -o runner.cpp MyTestSuite2.h</pre><p>This test runner generates the following output:</p><pre class="programlisting">Running 2 tests.
In MyTestSuite::testMultiplication:
MyTestSuite2.h:15: Error: Expected (2 * 2 == 5), found (4 != 5)
Failed 1 of 2 tests
Success rate: 50%</pre><p>The default filename for the XML results is <code class="literal">TEST-cxxtest.xml</code>.  The <code class="literal">--xunit-file</code> option can be used to specify an alternative filename.  Additionally, the value of the <code class="literal">--world</code> option can be used to specify the filename <code class="literal">TEST-&lt;world&gt;.xml</code>.</p></div></div><div class="section" title="4.3. Language Options"><div class="titlepage"><div><div><h3 class="title"><a id="_language_options"></a>4.3. Language Options</h3></div></div></div><p>When <code class="literal">cxxtestgen</code> performs test discovery, it also performs checks
to detect whether (1) the standard library is used and (2) exceptions
are used.  These checks configure CxxTest to <span class="emphasis"><em>not</em></span> assume that these
C++ language features are used when generating the test driver.
Thus, CxxTest can naturally be used with compilers that do not
support these features.</p><p>The <code class="literal">cxxtestgen</code> command includes several options that override
these checks and define features of C++ that are used by the test
runner.  The <code class="literal">--have-std</code> option indicates that the test runner
should use the standard library, and the <code class="literal">--no-std</code> option indicates
that the test runner should not use the standard library. The
<code class="literal">--have-eh</code> options indicates that the test runner should use
exception handling, and the <code class="literal">--no-eh</code> indicates that the test runner
should not not use exception handling.</p><p>The <code class="literal">--longlong</code> option specifies the type used for long long
integers.</p><p>CxxTest test runners depend quite heavily on static initialization
of objects that are used to define and execute tests. The
<code class="literal">--no-static-init</code> option can be used to avoid static initialization
for compilers or linkers that have trouble compiling the default test runner.</p></div><div class="section" title="4.4. Test Runner Options"><div class="titlepage"><div><div><h3 class="title"><a id="_test_runner_options"></a>4.4. Test Runner Options</h3></div></div></div><p>The default behavior of <code class="literal">cxxtestgen</code> is to generate a test runner
that directly integrates classes that define the tests along with
a <code class="literal">main()</code> function that executes all test suites.  It is often useful to
allow test suites to be processes separately and then linked together.  The <code class="literal">--root</code> and <code class="literal">--part</code> options
support this logic.  For example, suppose that we wish to define a test runner for tests in the headers
<code class="literal">MyTestSuite1.h</code> and <code class="literal">MyTestSuite2.h</code>.  We execute <code class="literal">cxxtestgen</code> with the <code class="literal">--part</code> option to generate source files for each of the test suites:</p><pre class="programlisting">cxxtestgen --part --error-printer -o MyTestSuite1.cpp MyTestSuite1.h
cxxtestgen --part --error-printer -o MyTestSuite2.cpp MyTestSuite2.h</pre><p>Similarly, we execute <code class="literal">cxxtestgen</code> with the <code class="literal">--root</code> opiton to generate the <code class="literal">main()</code> routine:</p><pre class="programlisting">cxxtestgen --root --error-printer -o runner.cpp</pre><p>Finally, the test runner is built by compiling all of these source files together:</p><pre class="programlisting">g++ -o runner -I$CXXTEST runner.cpp MyTestSuite1.cpp MyTestSuite2.cpp</pre></div><div class="section" title="4.5. Template Files"><div class="titlepage"><div><div><h3 class="title"><a id="_template_files"></a>4.5. Template Files</h3></div></div></div><p>TODO</p><p>To use you own test runner, or to use the supplied ones in different ways, you can use CxxTest template files. These are ordinary source files with the embedded "command" &lt;CxxTest world&gt; which tells cxxtestgen.pl to insert the world definition at that point. You then specify the template file using the --template option.</p><p>See samples/file_printer.tpl for an example.</p><p>Note: CxxTest needs to insert certain definitions and #include directives in the runner file. It normally does that before the first #include &lt;cxxtest/*.h&gt; found in the template file. If this behvaior is not what you need, use the "command" &lt;CxxTest preamble&gt;. See test/preamble.tpl in the cxxtest-selftest archive for an example of this.</p></div><div class="section" title="4.6. C++ Parser"><div class="titlepage"><div><div><h3 class="title"><a id="_c_parser"></a>4.6. C++ Parser</h3></div></div></div><p>Default vs. FOG</p></div></div><div class="section" title="5. Sample Problems"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="samples"></a>5. Sample Problems</h2></div></div></div></div><div class="section" title="6. Installation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="installation"></a>6. Installation</h2></div></div></div></div><div class="section" title="7. Status and Future Plans"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="discussion"></a>7. Status and Future Plans</h2></div></div></div><p>The CxxTest 4.0 release reflects major changes in the management
and focus of CxxTest.  The 4.0 release is the first release of
CxxTest in over seven years, and virtually all of the initial
developers have moved on to other projects.  CxxTest is heavily
used at Sandia National Laboratories, and Sandia’s ongoing use of
CxxTest is a major driver for the 4.0 release.  Similarly, major
changes in CxxTest reflect the focus of the developer team:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Perl is no longer used to support CxxTest scripts.  Python is now the only scripting language used by CxxTest.
</li><li class="listitem">
The testing scripts have been rewritten using the PyUnit framework.
</li><li class="listitem">
The installation process for CxxTest now leverages and integrates with the system Python installation.
</li><li class="listitem">
A more comprehensive C++ parser is now available, which supports testing of templates.
</li><li class="listitem">
The CxxTest GUI is no longer supported, and the <a class="link" href="#ts_warn">TS_WARN</a> is deprecated.
</li><li class="listitem">
CxxTest runners now have a command-line interface that facilitates interative use of the test runner.
</li><li class="listitem">
A new user guide is now available in PDF, HTML and Ebook formats.
</li></ul></div><p>Additionally, CxxTest is now validated with continuous integration
tests.  Yes, the CxxTest developers eat their own dog food!</p><p>Although the GUI option for <code class="literal">cxxtestgen</code> appears to work fine, this
GUI is rather primitive.  It simply provides a visual summary of
the test results, and not the interactive test execution that a
user would expect.  This capability is deprecated since none of the
current developers use this feature.  CxxTest users should consider
using CxxTest with <a class="ulink" href="http://jenkins-ci.org/" target="_top">Jenkins</a>.  The <code class="literal">XUnitPrinter</code>
test listener generates XML files that can be easily integrated by
<a class="ulink" href="http://jenkins-ci.org/" target="_top">Jenkins</a>, which creates a visual summary of
test results with links to drill-down into test outputs.</p><p>Discuss support for …</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
embedded compilers…  (Macros vs templates)
</li><li class="listitem">
SCONS
</li><li class="listitem">
Python 3.0
</li></ul></div><p>This documentation has highlighted the commonly used test listeners.
There are a variety of other test listeners provided by CxxTest
that support advanced Cxxtest applications.  For example, the <code class="literal">YesNoRunner</code> is
perhaps the simplest test listener;  it simply returns the number
of test failures.  The <code class="literal">StdioFilePrinter</code> is used by <code class="literal">StdioPrinter</code>,
but it does not assume that <code class="literal">stdio</code> is the default output stream.  This test listener can be used
in contexts where a custom output stream must be specified.</p></div><div class="appendix" title="A. Test Assertion Examples"><h2 class="title" style="clear: both"><a id="appendix_A"></a>A. Test Assertion Examples</h2><div class="variablelist"><dl><dt><span class="term">
<a id="ts_assert"></a> TS_ASSERT
</span></dt><dd>
This is the most basic test assertion, which simply verifies that the <code class="literal"><span class="emphasis"><em>expr</em></span></code> argument is true:
</dd></dl></div><pre class="programlisting">   void test_assert( void )
   {
      TS_ASSERT(1 + 1 &gt; 1);
   }</pre><div class="variablelist"><dl><dt><span class="term">
<a id="ts_assert_delta"></a> TS_ASSERT_DELTA
</span></dt><dd>
This test assertion verifies two floating point values are within a specified absolute difference:
</dd></dl></div><pre class="programlisting">   void test_assert_delta( void )
   {
      TS_ASSERT_DELTA(sqrt(4.0), 2.0, 1e-7);
   }</pre><div class="variablelist"><dl><dt><span class="term">
<a id="ts_assert_differs"></a> TS_ASSERT_DIFFERS
</span></dt><dd>
This test assertion verifies that the two arguments are not equal:
</dd></dl></div><pre class="programlisting">   void test_assert_differs( void )
   {
      TS_ASSERT_DIFFERS(1,2);
   }</pre><div class="variablelist"><dl><dt><span class="term">
<a id="ts_assert_equals"></a> TS_ASSERT_EQUALS
</span></dt><dd>
  This test assertion verifies that the two arguments are equal:
</dd></dl></div><pre class="programlisting">   void test_assert_equals( void )
   {
      TS_ASSERT_EQUALS(21 % 5, 1);
   }</pre><p>Note that this test is performed using the C++ <code class="literal"><span class="emphasis"><em>==</em></span></code> operator, whose behavior may be redefined for the two argument types.</p><div class="variablelist"><dl><dt><span class="term">
<a id="ts_assert_less_than"></a> TS_ASSERT_LESS_THAN
</span></dt><dd>
This test assertion verifies that the first argument is strictly less than the second argument:
</dd></dl></div><pre class="programlisting">   void test_assert_less_than( void )
   {
      TS_ASSERT_LESS_THAN(0, 1);
   }</pre><div class="variablelist"><dl><dt><span class="term">
<a id="ts_assert_less_than_equals"></a> TS_ASSERT_LESS_THAN_EQUALS
</span></dt><dd>
This test assertion verifies that the first argument is less than or equal to the second argument:
</dd></dl></div><pre class="programlisting">   void test_assert_less_than_equals( void )
   {
      TS_ASSERT_LESS_THAN_EQUALS(0, 0);
   }</pre><div class="variablelist"><dl><dt><span class="term">
<a id="ts_assert_predicate"></a> TS_ASSERT_PREDICATE
</span></dt><dd>
This test assertion takes as an argument the name of a class, similar to a STL <code class="literal"><span class="emphasis"><em>unary_function</em></span></code>, and evaluates the <code class="literal"><span class="emphasis"><em>operator()</em></span></code> method:
</dd></dl></div><pre class="programlisting">   class IsOdd
   {
   public:
    bool operator()(int x) const { return x % 2 == 1; }
   };

   void test_assert_predicate( void )
   {
      TS_ASSERT_PREDICATE(IsOdd, 29);
   }</pre><p>This test assertion can be seen as a generalization of <a class="link" href="#ts_assert">TS_ASSERT</a>, but it
allows the tester to see the failed value.</p><div class="variablelist"><dl><dt><span class="term">
<a id="ts_assert_relation"></a> TS_ASSERT_RELATION
</span></dt><dd>
It takes as an argument the name of a class, similar to a STL <code class="literal"><span class="emphasis"><em>binary_function</em></span></code>, and evaluates the <code class="literal"><span class="emphasis"><em>operator()</em></span></code> method:
</dd></dl></div><pre class="programlisting">   void test_assert_relation( void )
   {
      TS_ASSERT_RELATION( std::greater&lt;double&gt;, 1e6, 1000.0 );
   }</pre><p>This test assertion can be seen as a generalization of <a class="link" href="#ts_assert_equals">TS_ASSERT_EQUALS</a>, <a class="link" href="#ts_assert_differs">TS_ASSERT_DIFFERS</a>, <a class="link" href="#ts_assert_less_than">TS_ASSERT_LESS_THAN</a> and <a class="link" href="#ts_assert_less_than_equals">TS_ASSERT_LESS_THAN_EQUALS</a>.
This can be used to assert comparisons which are not covered by the builtin test assertions.</p><div class="variablelist"><dl><dt><span class="term">
<a id="ts_assert_same_data"></a> TS_ASSERT_SAME_DATA
</span></dt><dd>
This test assertion is similar to <a class="link" href="#ts_assert_equals">TS_ASSERT_EQUALS</a>,
except that it compares the contents of two buffers in memory:
</dd></dl></div><pre class="programlisting">   void test_assert_same_data( void )
   {
        char input="The quick brown fox ran over the lazy dog";
        char output[26];
        memcopy( output, input, 26 );
        TS_ASSERT_SAME_DATA( input, output, 26 );
   }</pre><p>The standard runner dumps the contents of both buffers as hex values when this test fails.</p><div class="variablelist"><dl><dt><span class="term">
<a id="ts_assert_throws"></a> TS_ASSERT_THROWS
</span></dt><dd>
This test assertion verifies that the specified exception is thrown when the first argument is executed:
</dd></dl></div><pre class="programlisting">   void throws_runtime_error( void )
   {
        raise std::runtime_error, "This method simply generates an exception";
   }

   void test_assert_throws( void )
   {
        TS_ASSERT_THROWS( self.throws_runtime_error(), std::runtime_error );
   }</pre><div class="variablelist"><dl><dt><span class="term">
<a id="ts_assert_throws_anything"></a> TS_ASSERT_THROWS_ANYTHING
</span></dt><dd>
This test assertion verifies that <span class="emphasis"><em>some</em></span> exception is thrown when the first argument is executed:
</dd></dl></div><pre class="programlisting">   void test_assert_throws_anything( void )
   {
        TS_ASSERT_THROWS_ANYTHING( self.throws_runtime_error() );
   }</pre><div class="variablelist"><dl><dt><span class="term">
<a id="ts_assert_throws_assert"></a> TS_ASSERT_THROWS_ASSERT
</span></dt><dd>
This test assertion verifies that an exception is thrown when executing the first argument.  The second argument specifies a variable declaration for the exception, and the third argument is executed to test that
exception value:
</dd></dl></div><pre class="programlisting">   void throws_value( void )
   {
        raise 1;
   }

   void test_assert_throws_assert( void )
   {
        TS_ASSERT_THROWS_ASSERT( self.throws_value(), const Error&amp; e, TS_ASSERT_EQUALS(e, 1) );
   }</pre><p>Note that this can be viewed as a generalization of <a class="link" href="#ts_assert_throws_equals">TS_ASSERT_THROWS_EQUALS</a>.</p><div class="variablelist"><dl><dt><span class="term">
<a id="ts_assert_throws_equals"></a> TS_ASSERT_THROWS_EQUALS
</span></dt><dd>
This test assertion verifies that an exception is thrown when executing the first argument.  The second argument specifies a variable declaration for the exception, and the third and fourth arguments are values that are asserted equal after the exception is thrown:
</dd></dl></div><pre class="programlisting">   void test_assert_throws_equals( void )
   {
        TS_ASSERT_THROWS_EQUALS( self.throws_value(), const Error&amp; e, e.what(), 1 );
   }</pre><div class="variablelist"><dl><dt><span class="term">
<a id="ts_assert_throws_nothing"></a> TS_ASSERT_THROWS_NOTHING
</span></dt><dd>
This test assertion verifies that an exception is <span class="emphasis"><em>not</em></span> thrown when executing the first argument:
</dd></dl></div><pre class="programlisting">   void throws_nothing( void )
   { }

   void test_assert_throws_nothing( void )
   {
        TS_ASSERT_THROWS_ASSERT( self.throws_nothing() );
   }</pre><div class="variablelist"><dl><dt><span class="term">
<a id="ts_fail"></a> TS_FAIL
</span></dt><dd>
This command triggers a test failure with an associated message:
</dd></dl></div><pre class="programlisting">   void test_fail( void )
   {
        TS_FAIL( "This test has failed." );
   }</pre><div class="variablelist"><dl><dt><span class="term">
<a id="ts_trace"></a> TS_TRACE
</span></dt><dd>
This command prints an informational message:
</dd></dl></div><pre class="programlisting">   void test_trace( void )
   {
        TS_TRACE( "This is a test tracing message." );
   }</pre><div class="variablelist"><dl><dt><span class="term">
<a id="ts_warn"></a> TS_WARN
</span></dt><dd>
This command prints a message as a warning:
</dd></dl></div><pre class="programlisting">   void test_warn( void )
   {
        TS_WARN( "This is a warning message." );
   }</pre></div></div></body></html>
